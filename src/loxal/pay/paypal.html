<!--
  ~ Copyright 2011 Alexander Orlov <alexander.orlov@loxal.net>. All rights reserved.
  ~ Use of this source code is governed by a BSD-style
  ~ license that can be found in the LICENSE file.
  -->

<form target="paypal" action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="add" value="1">
    <input type="hidden" name="cmd" value="_cart">
    <input type="hidden" name="business" value="alexander.orlov@loxal.net">
    <input type="hidden" name="item_name" value="blub">
    <input type="hidden" name="item_number" value="1">
    <input type="hidden" name="amount" value="22.00">
    <input type="hidden" name="no_shipping" value="2">
    <input type="hidden" name="no_note" value="1">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="bn" value="PP-ShopCartBF">
    <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_cart_LG.gif" border="0" name="submit"
           alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>

<a href="https://www.paypal.com/cgi-bin/webscr?cmd=_cart&amp;business=test@yahoo.com&amp;lc=US&amp;item_name=">https://www.paypal.com/cgi-bin/webscr?cmd=_cart&amp;business=test@yahoo.com&amp;...</a>$item&amp;item_number=$number&amp;amount=$amount&amp;currency_code=USD&amp;button_subtype=products&amp;cn=Add%20special%20instructions%20to%20the%20seller&amp;no_shipping=2&amp;weight_unit=lbs&amp;add=1&amp;bn=PP%2dShopCartBF%3abtn_cart_LG%2egif%3aNonHosted

https://www.x.com/content/html-variables-website-payments-standard

<form action="" id="BB_BuyButtonForm" method="post" name="BB_BuyButtonForm" target="_top"
      onSubmit="return validateAmount(this)" style="padding: 5px; margin: 0;"></form>

<script type="text/javascript"> // Validates the support amount function validateAmount(form){ if (!form.item_price_1.value.match( /^[0-9]+(\.([0-9]+))?$/)) { alert('You must enter a valid contribution.'); form.item_price_1.focus(); return false; } else { minDonation = form.item_min_price_1.value.replace(/[^\-\.0-9]+/g,''); maxDonation = form.item_max_price_1.value.replace(/[^\-\.0-9]+/g,''); if ((minDonation != "") && (parseFloat(form.item_price_1.value) < parseFloat(minDonation))) { alert('We do not accept contributions below ' + currencyChar + parseFloat(form.item_min_price_1.value)); form.item_price_1.focus(); return false; }else{ if ((maxDonation != "") && (parseFloat(form.item_price_1.value) > parseFloat(maxDonation))) { alert('Google Checkout does not accept contributions above ' + currencyChar + parseFloat(form.item_max_price_1.value)); form.item_price_1.focus(); return false; }else{ _gaq.push(['_addItem', '', 'CONT', 'Contribution', 'contribution', parseFloat(form.item_price_1.value), '1']); _gaq.push(['_trackEvent', 'checkout', 'clicked']); return true; } } } } // Ading .trim() to String for IE if(typeof String.prototype.trim !== 'function') { String.prototype.trim = function() { return this.replace(/^\s+|\s+$/, ''); } } // Returns the HTML for a Support button with a input field for the donation function choiceOnly(price){ var html = "<table cellpadding='0' cellspacing='0' width='1%' style='font:" + gadgets.skins.getProperty('FONT_FACE') + ";color:" + gadgets.skins.getProperty('CONTENT_TEXT_COLOR') + "'>"; if (prefs.getString("itemDesc")){ html+= "<tr'><td nowrap='nowrap' style='padding-bottom:3px;'>" + prefs.getString("itemDesc") +"</td></tr>"; } html += "<tr'><td nowrap='nowrap' style='padding-bottom:3px;'>"; html += currencyChar + " <input id='item_price_1' name='item_price_1' onfocus='"; html += 'this.style.color="black"; this.value="";'; html += "' type='text' style='color: gray; width: 88px;' value='" + price + "'/> "; html += "</td></tr><tr><td>"; html += "<input alt='Support' src='https://checkout.google.com/buttons/support.gif?merchant_id=" + prefs.getString("merchantId"); html += "&amp;w=130&amp;h=50&amp;style=" + prefs.getString("background") + "&amp;variant=text&amp;loc=en_US' type='image' style='height: 50px;margin-left:-10px'/>"; html += "</td></tr></table>"; return html; } // Get the userprefs object var prefs = new gadgets.Prefs(); if (prefs.getBool("acceptTerms") == true) { // Set the form post URL document.getElementById("BB_BuyButtonForm").action = "https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/" + prefs.getString("merchantId") + "?integration=supportgadget-blogger"; // Set the currency character var currencyChar = '$'; if(prefs.getString("currency") == "GBP") { currencyChar = '£'; } else if(prefs.getString("currency") == "EUR") { currencyChar = '€'; } var html = "<input name='item_name_1' type='hidden' value='" + prefs.getString("itemName") + "'/>"; html += "<input name='item_description_1' type='hidden' value='" + prefs.getString("itemDesc") + "'/>"; html += "<input name='item_quantity_1' type='hidden' value='1'/>"; html += "<input name='item_currency_1' type='hidden' value='" + prefs.getString("currency") + "'/>"; html += "<input name='item_is_modifiable_1' type='hidden' value='true'/>"; html += "<input type='hidden' name='shopping-cart.items.item-1.digital-content.display-disposition' value='OPTIMISTIC'/>" html += "<input type='hidden' name='shopping-cart.items.item-1.digital-content.description' value='" + prefs.getString("thankYouMessage") + "'/>" if (prefs.getString("itemMinPrice")) { html += "<input name='item_min_price_1' type='hidden' value='" + prefs.getString("itemMinPrice") + "'/>"; } else { html += "<input name='item_min_price_1' type='hidden' value='0.01'/>"; } html += "<input name='item_max_price_1' type='hidden' value='50.0'/>"; html += "<input name='_charset_' type='hidden' value='utf-8'/>"; if (prefs.getString("itemSuggestedPrice")) { var price = prefs.getString("itemSuggestedPrice"); price = price.replace(/[^\-\.0-9]+/g,'') } else { price = '0.00'; } html += choiceOnly(price); document.getElementById("BB_BuyButtonForm").innerHTML = html; } else { var html = "<div class='tosMessage' align='center'><p style='font:" + gadgets.skins.getProperty('FONT_FACE') + ";color:" + gadgets.skins.getProperty('CONTENT_TEXT_COLOR') + "'>Please check the box in the gadget settings indicating you understand that your public business information will be displayed for contributions</p></div>"; document.getElementById("BB_BuyButtonForm").innerHTML = html; } gadgets.window.adjustHeight(); </script>