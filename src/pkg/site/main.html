<!--
  ~ Copyright 2011 Alexander Orlov <alexander.orlov@loxal.net>. All rights reserved.
  ~ Use of this source code is governed by a BSD-style
  ~ license that can be found in the LICENSE file.
  -->

<!DOCTYPE html>
<meta charset="utf-8">
<meta name="keywords" content="{{ Title }}, {{ Author }}">
<meta name="description" content="{{ Title }} {{ TitleDesc }}">
<meta name="author" content="{{ Author }}">
<link rel="stylesheet" href="/static/theme/winter.css" type="text/css">
<title>Home | {{ Title }}</title>

<script>
    // Google Analytics
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-7363751-1']);
    _gaq.push(['_setDomainName', '.loxal.net']);
    _gaq.push(['_setAllowHash', 'false']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script');
        ga.type = 'text/javascript';
        ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
    })();
</script>

<div id="header">
    <div id="header-title">
        <img id="logo" src="/static/theme/logo.png" alt="Logo" title="{{ Title }} Logo"/>
        <a href="/" id="title" title="Home">{{ Title }}</a>

        <div id="header-description">
            {{ TitleDesc }}
        </div>
    </div>
    <div id="meta-ctrl">
    </div>
</div>

<div id="sidebar">
    <div id="index">
        <ul class="nav">
            <li><a href="/" title="Start and website entry point">
                Home</a>
            <li><a href="/imprint.html" title="...with contact formular">
                Imprint</a>
        </ul>

        <h1>Services</h1>
        <ul class="nav">
            <li>
                <a href="/cmd/list" title="Map key combinations (shortcuts) to web requests">Shell</a>
        </ul>
    </div>
</div>

<div id="main">
    <h1>Prototype App</h1>

    <p>This is a proof-of-concept app to show how to write RESTful GWT frontends for RESTful Go@GAE backends.
        <script>
            //            XMLHttpRequest.op // TODO make an XHR to retrieve the Command List and save it as JSON
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '/cmd/list.json', false);
            xhr.onreadystatechange = function (evt) {
//                document.writeln(xhr.responseText);
//                var r = eval(xhr.responseText);
                var r = xhr.responseText;
                document.writeln(r);
//                document.writeln(r.cmds[1].Name);
            };
            xhr.send();

            var myJSONObject = {'bindings': [
        {'ircEvent': 'PRIVMSG', 'method': 'newURI', 'regex': '^http://.*'},
        {'ircEvent': 'PRIVMSG', 'method': 'deleteURI', 'regex': '^delete.*'},
        {'ircEvent': 'PRIVMSG', 'method': 'randomURI', 'regex': '^random.*'}
    ]
};

            var o = {"cmds": [ {"Name":"namee","RESTcall":"rc----","Desc":"desc","Creator":"","User":"alex@example.com","Created":0,"Updated":1306253380000000}, {"Name":"gom1@#$","RESTcall":"call","Desc":"java","Creator":"","User":"","Created":0,"Updated":0}, {"Name":"gom1@#$%^","RESTcall":"call","Desc":"java","Creator":"","User":"","Created":0,"Updated":0}, {"Name":"t","RESTcall":"http://twitter.com","Desc":"tweet","Creator":"","User":"","Created":1306488921000000,"Updated":0}, {"Name":"name@$%^","RESTcall":"rc","Desc":"desc","Creator":"","User":"","Created":1306490622000000,"Updated":0}, {"Name":"tOm!","RESTcall":"http://twitter.com","Desc":"tweet","Creator":"","User":"","Created":1306504399000000,"Updated":0}, {"Name":"tt","RESTcall":"http://twitter.com","Desc":"tweet","Creator":"","User":"","Created":1306770278000000,"Updated":0}, {"Name":"ttt","RESTcall":"http://twitter.com","Desc":"tweet","Creator":"","User":"","Created":1306770301000000,"Updated":0}, {"Name":"top","RESTcall":"http://twitter.com","Desc":"tweet","Creator":"","User":"","Created":1306772265000000,"Updated":0}, {"Name":"name1111","RESTcall":"rc","Desc":"desc","Creator":"","User":"","Created":1306802458000000,"Updated":0}, ]}
//            document.writeln(myJSONObject.bindings[0].method);
//            document.writeln(o.cmds[2].Name);

        </script>
</div>

<div id="footer">
    <p>
        <span>
            Powered by <a href="http://github.com/loxal"
                          title="Sem - Google App Engine Content Management System">
            Sem <a href="http://golang.org">Go</a>@<abbr title="Google App Engine">GAE</abbr> Service Framework</a>
        </span>
        <span style="float: right;">
            &copy; {{ Year }} {{ Copyright }}
        </span>
    </p>
</div>

